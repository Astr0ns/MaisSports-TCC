<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>+Sports</title>

    <link rel="stylesheet" href="/css/style.css" type="text/css">
    <link rel="stylesheet" media="screen and (min-width: 535px) and (max-width: 768px)" href="/css/small.css">
    <link rel="stylesheet" media="screen and (max-width: 534px)" href="/css/verysmall.css">
    <link rel="stylesheet" media="screen and (min-width: 769px) and (max-width: 1024px)" href="/css/medium.css">
    <!-- End Responsives CSS's-->


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <link rel="stylesheet" href="/css/codes/local-page.css">
</head>
<body>
    <main>
        
        <div class="title">
            <h1>Cabana do Sossego Refugio na Serra da Mantiqueira</h1>
        </div>

        
        <section class="gallery">
            <section class="main-image">
            <img src="https://imgnike-a.akamaihd.net/768x768/01113851A10.jpg" alt="Cabin Main Image">
            </section>
            <section class="thumbnail-images">
            <img src="https://imgnike-a.akamaihd.net/768x768/01113851A10.jpg" alt="Thumbnail 1">
            <img src="https://imgnike-a.akamaihd.net/768x768/01113851A10.jpg" alt="Thumbnail 2">
            <img src="https://imgnike-a.akamaihd.net/768x768/01113851A10.jpg" alt="Thumbnail 3">
            <img src="https://imgnike-a.akamaihd.net/768x768/01113851A10.jpg" alt="Thumbnail 4">
            </section>
        </section>

        <section class="">

            <section class="reservarInfo">
                <h2>R$140<span>/Hora</span></h2>

                <div style="position: relative; display: flex; justify-content: center; margin-top: 20px;">
                    <input name="" id="calendar" oninput="handleInput(event)" class="time-picker" type="text">
                    <h2 id="placeholderDate">DATA:</h2>
                </div>
                <div style="margin-top: 55px; display: flex;">
                    <div style="position: relative; width: 50%;">
                        
                        <input name="" id="start-time" class="time-picker" type="text" style="border-radius: 10px 0 0 10px;">
                        <label for="start-time" class="timeLabel" style="border-radius: 10px 0 0 10px; left: 50%;"><h2>CHECK-IN</h2></lebel>
                    </div>
                    <div style="position: relative; width: 50%;">
                        <input name="" id="end-time" class="time-picker" type="text" style="border-radius: 0 10px 10px 0;">
                        <label for="end-time" class="timeLabel" style="border-radius: 0 10px 10px 0; left: 50%;"><h2>CHECK-OUT</h2></lebel>
                    </div>
                </div>

                <section class="infoPreco">
                    <p> R$140,00 x 2 Horas</p>
                    <h3>subTotal: R$280,00</h3>
                </section>

                <button type="submit">Reservar</button>
                
            </section>
            <button type="button" onclick="pegarDiasSemFunc()">teste</button>
                
        </section>
        
    </main>

 <script>
    
function teste(){
    const local = <%- JSON.stringify(local) %>;
    const email = '<%= email %>';
    console.log(local.dias[0].dia_semana); // Aqui você pode usar os dados no JavaScript
    console.log(local.dias[0].horario_inicio); // Aqui você pode usar os dados no JavaScript
}
    
 </script>
 
    <script> 
        function pegarDiasSemFunc()  {
            const diaSemana = [];
            const diaSemanaTotal = ["Domingo", "Segunda", "Terca", "Quarta", "Quinta", "Sexta", "Sabado"];
            let result = []
            const local = <%- JSON.stringify(local) %>;
            local.dias.forEach(function(dia, index) {
                diaSemana.push(
                    local.dias[index].dia_semana
                );
                
            });

            diaSemanaTotal.forEach((dia, index) => {
                if (!diaSemana.includes(dia)) {
                    // result += `date.getDay() === ${index} || `; // Adiciona o índice e o dia ao resultado
                    result.push(
                        index
                    );
                }
            });
            return result
            

        }      
        
        function handleInput(event) {
            const value = event.target.value;
            console.log("Valor atualizado:", value);

            // Instância para o campo de início
        flatpickr("#start-time", {
            enableTime: true,
            noCalendar: true,
            dateFormat: "H:i",
            time_24hr: true,
            defaultDate: "10:00" // Defina o horário padrão para o início
        });

        // Instância para o campo de fim
        flatpickr("#end-time", {
            enableTime: true,
            noCalendar: true,
            dateFormat: "H:i",
            time_24hr: true,
            defaultDate: "19:00" // Defina o horário padrão para o fim
        });
            
        }

        flatpickr("#calendar", {
            enableTime: false, // Desativar a seleção de hora
            dateFormat: "d/m/Y", // Formato de data
            defaultDate: new Date(), // Data padrão é a data atual
            minDate: "today",
            maxDate: new Date().fp_incr(90), // 90 days from now
            disable: ["2025-01-30", "2025-02-21", "2025-03-08", new Date(2025, 4, 9) ],
            "disable": [
                function(date) {
                    const dias = pegarDiasSemFunc()
                    return (date.getDay() === dias[0] || date.getDay() === dias[1] || date.getDay() === dias[2] || date.getDay() === dias[3] || date.getDay() === dias[4] || date.getDay() === dias[5] || date.getDay() === dias[6]);

                }
            ],
            "locale": {
                "firstDayOfWeek": 1 // start week on Monday
            }
            
        });

        

        

        
    </script>
</body>
</html>